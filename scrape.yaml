- name: Install Dependencies
  run: |
    python -m pip install --upgrade pip
    pip install selenium beautifulsoup4 undetected-chromedriver

- name: Install Chrome and ChromeDriver
  run: |
    sudo apt-get update
    sudo apt-get install -y google-chrome-stable
    CHROME_DRIVER_VERSION=$(curl -sS chromedriver.storage.googleapis.com/LATEST_RELEASE)
    wget -N https://chromedriver.storage.googleapis.com/$CHROME_DRIVER_VERSION/chromedriver_linux64.zip
    unzip chromedriver_linux64.zip
    sudo mv chromedriver /usr/local/bin/

- name: Run Scraper
  env:
    CHROME_DRIVER_PATH: ${{ secrets.CHROME_DRIVER_PATH }}
    BASE_URL: ${{ secrets.BASE_URL }}
  run: |
    python script.py
